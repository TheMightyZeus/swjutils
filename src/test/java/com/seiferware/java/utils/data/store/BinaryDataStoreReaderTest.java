package com.seiferware.java.utils.data.store;

import static org.junit.Assert.assertNotNull;
import static org.junit.Assert.assertNull;

import java.io.ByteArrayInputStream;
import java.io.IOException;

import org.junit.After;
import org.junit.Before;
import org.junit.Test;

import com.seiferware.java.utils.data.store.BinaryDataStoreWriterTest.TestObject;

@SuppressWarnings("javadoc")
public class BinaryDataStoreReaderTest {
	TestObject test = null;
	BinaryDataStoreReader reader = null;
	byte[] data = {0x73, 0x00, 0x05, 0x5F, 0x74, 0x79, 0x70, 0x65, 0x00, 0x49, 0x63, 0x6F, 0x6D, 0x2E, 0x73, 0x65, 0x69, 0x66, 0x65, 0x72, 0x77, 0x61, 0x72, 0x65, 0x2E, 0x6A, 0x61, 0x76, 0x61, 0x2E, 0x75, 0x74, 0x69, 0x6C, 0x73, 0x2E, 0x64, 0x61, 0x74, 0x61, 0x2E, 0x73, 0x74, 0x6F, 0x72, 0x65, 0x2E, 0x42, 0x69, 0x6E, 0x61, 0x72, 0x79, 0x44, 0x61, 0x74, 0x61, 0x53, 0x74, 0x6F, 0x72, 0x65, 0x57, 0x72, 0x69, 0x74, 0x65, 0x72, 0x54, 0x65, 0x73, 0x74, 0x24, 0x54, 0x65, 0x73, 0x74, 0x4F, 0x62, 0x6A, 0x65, 0x63, 0x74, 0x73, 0x00, 0x0A, 0x74, 0x65, 0x73, 0x74, 0x53, 0x74, 0x72, 0x69, 0x6E, 0x67, 0x00, 0x04, 0x74, 0x65, 0x73, 0x74, 0x69, 0x00, 0x07, 0x74, 0x65, 0x73, 0x74, 0x49, 0x6E, 0x74, 0x00, 0x00, 0x00, 0x03, 0x66, 0x00, 0x09, 0x74, 0x65, 0x73, 0x74, 0x46, 0x6C, 0x6F, 0x61, 0x74, 0x40, 0x48, (byte)0xF5, (byte)0xC3, 0x6F, 0x00, 0x09, 0x73, 0x75, 0x62, 0x4F, 0x62, 0x6A, 0x65, 0x63, 0x74, 0x73, 0x00, 0x05, 0x5F, 0x74, 0x79, 0x70, 0x65, 0x00, 0x49, 0x63, 0x6F, 0x6D, 0x2E, 0x73, 0x65, 0x69, 0x66, 0x65, 0x72, 0x77, 0x61, 0x72, 0x65, 0x2E, 0x6A, 0x61, 0x76, 0x61, 0x2E, 0x75, 0x74, 0x69, 0x6C, 0x73, 0x2E, 0x64, 0x61, 0x74, 0x61, 0x2E, 0x73, 0x74, 0x6F, 0x72, 0x65, 0x2E, 0x42, 0x69, 0x6E, 0x61, 0x72, 0x79, 0x44, 0x61, 0x74, 0x61, 0x53, 0x74, 0x6F, 0x72, 0x65, 0x57, 0x72, 0x69, 0x74, 0x65, 0x72, 0x54, 0x65, 0x73, 0x74, 0x24, 0x54, 0x65, 0x73, 0x74, 0x4F, 0x62, 0x6A, 0x65, 0x63, 0x74, 0x73, 0x00, 0x0A, 0x74, 0x65, 0x73, 0x74, 0x53, 0x74, 0x72, 0x69, 0x6E, 0x67, 0x00, 0x04, 0x74, 0x65, 0x73, 0x74, 0x69, 0x00, 0x07, 0x74, 0x65, 0x73, 0x74, 0x49, 0x6E, 0x74, 0x00, 0x00, 0x00, 0x03, 0x66, 0x00, 0x09, 0x74, 0x65, 0x73, 0x74, 0x46, 0x6C, 0x6F, 0x61, 0x74, 0x40, 0x48, (byte)0xF5, (byte)0xC3, 0x7A};
	
	@Before
	public void setUp() throws Exception {
		reader = new BinaryDataStoreReader(new ByteArrayInputStream(data));
	}
	
	@After
	public void tearDown() throws Exception {}
	
	@Test
	public void testReadObject() throws IOException {
		assertNull(test);
		test = (TestObject)reader.readObject();
		assertNotNull(test);
		assertNotNull(test.getSubObject());
	}
}
